Metadata-Version: 2.4
Name: mise
Version: 0.1.0
Summary: Deterministic, Python-first ETL runner for the food graph
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: rich>=13.7.0
Requires-Dist: PyYAML>=6.0
Requires-Dist: jsonschema>=4.22

# mise — the new ETL for the Food Graph

**mise** (as in *mise en place*) is a Python-first, deterministic build system for the Food Graph.
It replaces ad‑hoc, monolithic scripts with **small, testable stages** and **clear artifacts**.
It coexists with the legacy `etl/` so you can switch the API to either build via envs.

- Runner: Python 3.11+ (CLI)
- Artifacts: `etl/build/{tmp,out,graph,database,report}`
- Status: bootstrapped; stages will be layered in along the TPT plan

## Quickstart

```bash
# install (editable)
python -m pip install -e ./etl

# run the pipeline
python -m mise run build --with-tests

# run the pipeline (will expand as stages are added)
python -m mise run build
```

### Switch API to use mise outputs

Expose the DB (or other artifacts) to the API via envs:

```
GRAPH_DB_PATH=etl/build/database/graph.dev.sqlite
GRAPH_BUILD_ROOT=etl/build
```

The API can toggle between legacy and mise builds by switching paths.

## Why a new package?

- The legacy ETL is a single ~1k‑loc Python file plus a TS runner; hard to extend to 11+ stages.
- The TPT system needs **many intermediate artifacts** with **strong validation** and **golden tests**.
- We want **determinism** across stages for reliable builds.
